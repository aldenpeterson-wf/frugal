project: frugal
language: golang

# https://github.com/Workiva/messaging-docker-images/tree/6bf14bb66a9ab100e1c1f2e479fec9dd588972eb
runner_image: drydock.workiva.org/workiva/messaging-docker-images:71060

script:
    - ./scripts/smithy.sh
    - tar -czf goLib.tar.gz ./lib/go
    - export PATH=$PATH:./bin && ./frugal --gen dart -r --out='test/integration/dart/gen-dart' test/integration/frugalTest.frugal

artifacts:
    artifactory:
        - frugal-*.jar
    release:
        - /frugal
    go_library:
        - goLib.tar.gz
    pub:
        - frugal.pub.tgz
    pypi:
        - frugal-*.tar.gz
